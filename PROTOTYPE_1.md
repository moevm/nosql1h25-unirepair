# Инструкция по запуску и использованию приложения

## Запуск приложения

### На Windows:
1. Откройте терминал в корневой директории проекта (все последующие команды проводить в этом же терминале) 
2. Введите команду: `.\run.cmd`
3. Дождитесь выполнения всех тестов и сообщения: `"A total of 36 tests passed, 0 tests failed!"`
4. Перейдите по ссылке: [http://localhost:5173/](http://localhost:5173/)
5. Для завершения работы используйте сочетание клавиш: `Ctrl + C`. Затем ввести `.\stop.cmd` для выключения БД.

### На Linux:
1. Откройте терминал в корневой директории проекта (все последующие команды проводить в этом же терминале) 
2. Введите команду: `./run.sh`
3. Дождитесь выполнения всех тестов и сообщения: `"A total of 36 tests passed, 0 tests failed!"`
4. Перейдите по ссылке: [http://localhost:5173/](http://localhost:5173/)
5. Для завершения работы используйте сочетание клавиш: `Ctrl + C`, затем введите `docker-compose down`.

**Примечания:** 
- Далее описан функционал приложения для каждого вида пользователей. Если какая-либо функция доступна в приложении, но не описана ниже, то она является недоработанной и ее использование не рекомендовано. 
- На данный момент данные между сессиями не сохраняются, ввиду необходимости воспроизводимости и тестирования, поэтому все необходимые проверки нужно провести в рамках одной сессии. 

---

## Общие функции для всех пользователей

**Возврат на личную страницу пользователя** (для любого) возможен путём нажатия на его ФИО или на круглую иконку пользователя в верхнем левом углу экрана. 

*Важно:* При использовании данной функции во время заполнения формы/отчёта промежуточное сохранение формы/отчёта в рамках данной итерации не предусмотрено.

**Выход из аккаунта пользователя** (любого) возможен путём нажатия на стрелку в левом нижнем углу экрана. После данного действия пользователь будет перемещён на входную страницу (с возможностью ввода логина и пароля). 

*Рекомендация:* Для перехода в другой аккаунт рекомендуется именно такой способ выхода из приложения.

---

## Тестирование функционала администратора

**Вход в приложение:**  
Логин: `admin_maria`  
После входа происходит перемещение на личную страницу.

**Доступные действия на личной странице:**

1. **Изменение статуса**:
   - При нажатии кнопки "Начать смену" статус "не на смене" заменяется статусом "на смене".
   - При нажатии кнопки "Завершить смену" статус меняется на исходный.

2. **Просмотр базы данных**:
(Данной функции не было в макете, однако в связи с уточнением требований было решено добавить возможность просмотра содержимого бд с помощью таблиц)
   - При нажатии "Базы данных" реализуется переход на страницу с маршрутами к просмотру списков различных сущностей
   - На каждой странице:
     - Возможность ввести параметры поиска
     - Кнопка "сбросить" - стирает все введённые параметры
     - Кнопка "найти" - применяет введённые параметры и возвращает таблицу
     - Если нажать "найти" без параметров - возвращается список всех сущностей данного вида

   **Доступные разделы базы данных:**
   - **Сотрудники**:
     - Фильтры: фамилия/имя/отчество/должность (галочка "Должность")/номер бригады (для пожарных/бригадиров)/адрес/логин/дата регистрации/дата последнего изменения
   - **Отчёты**:
     - Фильтры: статус/расход воды/расход пены/предполагаемая причина пожара/оценка ущерба/время сохранения
   - **Формы вызова**:
     - Фильтры: статус/дата создания/дата последнего обновления/источник вызова/характер пожара/ранг пожара/адрес/число жертв/номер прикреплённой бригады (на данной итерации только одна)
   - **Инвентарь**:
     - Фильтр: наименование инвентаря
     - Также доступна возможность добавить инвентарь: для добавления инвентаря введите его название в поле ввода и нажмите "Добавить".

3. **Редактирование**:
   - Выберите раздел "Редактировать" в левой верхней части экрана
   - Доступные варианты (на текущей итерации):
     - **Добавить пользователя**: форма для добавления нового пользователя, , при заполнении которой необходимо нажать "добавить пользователя" и в базу данных будет добавлен новый пользователь.
     - **Редактировать пользователя / удалить пользователя**: на данной итерации здесь доступен только поиск пользователей
     - **Скачать/удалить отчёт**: на данной итерации здесь доступен только поиск отчётов по параметрам автора

---

## Тестирование функционала оператора

**Вход в приложение:**  
Логин: `operator_dmitriy`  
После входа происходит перемещение на личную страницу.

**Доступные действия на личной странице:**

1. **Изменение статуса** (аналогично администратору)

2. **Создание новой формы**:
   - Нажмите раздел «Новая форма» в правом верхнем углу
   - Важные особенности:
     - Если выйти без нажатия "Отправить бригадам" - форма не сохранится
     - Если заполнить форму, нажать «Отправить бригадам» и, не нажав кнопку «Сохранить форму», выйти из нее, то данный вызов останется «незавершённым» и будет отображаться в разделе «Текущие вызовы» у оператора и у соответствующей бригады в разделе "Вызовы" без возможности завершения, так как на данной итерации она не предусмотрена редактура незавершённых форм
     - Если заполнить форму и последовательно нажать кнопки «Отправить бригадам» и «Сохранить форму», то данный вызов будет считаться завершённым (он не будет отображаться во вкладке «Текущие вызовы» у оператора и во вкладке "Вызовы" у соответствующей ему бригады) и будет создан отчёт соответствующей бригады на его основе
   - Особенности на текущей итерации:
     - Доступен выбор только одной бригады
     - Доступен выбор только одного автомобиля
     - Бригады и автомобили отображаются все, независимо от текущей занятости

3. **Просмотр отчётов (завершённых форм вызова)**:
   - Раздел «Отчёты» в левой верхней части экрана
   - Просмотр завершённых форм вызова данного оператора
   - Открытие отчёта - клик по нему
   - Закрытие - крестик в правом верхнем углу

4. **Просмотр текущих вызовов**:
   - Раздел «Текущие вызовы» в левой верхней части экрана
   - На данной итерации доступен просмотр всех незавершённых вызовов (независимо от автора-оператора). Способ добавления текущего вызова описан выше.

---

## Тестирование функционала бригадира
*(Функционал пожарных аналогичен, но без возможности редактировать отчёты бригады)*

**Вход в приложение:**  
Логины:
- Бригада 1: `brigadier_igor`
- Бригада 2: `brigadier_oleg`  
После входа происходит перемещение на личную страницу.

**Доступные действия на личной странице:**

1. **Изменение статуса** (аналогично администратору)

2. **Просмотр вызовов**:
   - Кнопка "Вызовы" в левой верхней части экрана
   - Отображаются все формы вызова для данной бригады, которые не завершены
   - Каждая форма содержит информацию о вызове
   - При клике на форму/стрелку - отображается карта (на текущей итерации не соответствует адресу)
   - *Важно:* После добавления нового вызова оператором может потребоваться обновление страницы, так как на данной итерации автоматическое обновление страницы не предусмотрено
   - После сохранения формы оператором вызов пропадает из списка (может потребоваться обновление страницы, так как на данной итерации автоматическое обновление страницы не предусмотрено)

3. **Просмотр и редактирование отчётов** (только для бригадира):
   - Раздел "Отчеты"
   - Функции:
     - Кнопка слева от поля ввода - переключение отображения отчётов: список или отдельные файлы
     - Текстовое поле - поиск отчётов по названию (автопоиск при вводе)
     - Кнопка справа - сортировка по названиям (т.е. по дате)
     - Клик на отчёт - просмотр. Крестик - закрытие просмотра
     - Кнопка "+" в правом нижнем углу - заполнение новых отчётов. При ее нажатии появляется список новых отчётов.
       - Новые отчёты появляются после завершения вызова (соответствующего данной бригаде) оператором
       - На данной итерации для обновления списка может потребоваться обновление страницы (если вы добавили новый отчёт через завершение формы вызова оператором)
       - При выходе без сохранения введённые в отчёт данные не сохраняются
       - После нажатия "отправить отчёт" редактирование дальнейшее его редактирование невозможно. Новый отчёт появится в списке, описанном выше. 
