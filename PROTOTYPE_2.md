# Инструкция по запуску и использованию приложения

## Запуск приложения

### На Windows:
1. Откройте терминал в корневой директории проекта (все последующие команды проводить в этом же терминале) 
2. Введите команду: `.\clean_run.cmd` (если необходим запуск без сохранения БД для последующих запусков) или команду `.\prod_run.cmd`
3. Дождитесь выполнения всех тестов и сообщения: `"A total of 36 tests passed, 0 tests failed!"` (в случае запуска без сохранения БД)
4. Перейдите по ссылке: [http://localhost:5173/](http://localhost:5173/)
5. Для завершения работы используйте сочетание клавиш: `Ctrl + C`. Затем ввести `.\stop.cmd` для выключения БД.

### На Linux:
1. Откройте терминал в корневой директории проекта (все последующие команды проводить в этом же терминале) 
2. Введите команду: `./clean_run.sh` (если необходим запуск без сохранения БД) или команду `.\prod_run.sh`
3. Дождитесь выполнения всех тестов и сообщения: `"A total of 36 tests passed, 0 tests failed!"` (в случае запуска без сохранения БД)
4. Перейдите по ссылке: [http://localhost:5173/](http://localhost:5173/)
5. Для завершения работы используйте сочетание клавиш: `Ctrl + C`, затем введите `docker-compose down`.

**Примечания:** 
- Далее описан функционал приложения для каждого вида пользователей. Если какая-либо функция доступна в приложении, но не описана ниже или в PROTOTYPE_1.md, то она является недоработанной и ее использование не рекомендовано. 
- Если вам необходимо сохранение данных между сессиями то для запуска используйте команды `.\prod_run.cmd` или `.\prod_run.sh` описанные выше.

---

## Общие функции для всех пользователей

**Редактор данных пользователя** доступен на личной странице путём нажатия кнопки "Редактировать данныне". К редактированию доступны: номер телефона, email, адрес, пароль. При нажатии "Ок" введённые данные сохранятся, при нажатии "Отмена" - останутся преждними. 

---

## Тестирование функционала администратора

**Вход в приложение:**  
Логин: `admin_maria`  
После входа происходит перемещение на личную страницу.

**Доступные действия на личной странице:**

1. **Редактирование**:
   - Выберите раздел "Редактировать" в левой верхней части экрана
   - Добавленые варианты (на текущей итерации):
     - **Редактировать пользователя**: Здесь осуществсляется поиск пользователей по их параметрам, а при нажатии на значёк карандаша возможно редактирование данных выбранного пользователя. 
     - **Удалить пользователя**: Здесь осуществсляется поиск пользователей по их параметрам, а затем доступна возможность удалить выбранных пользователей (выбор осуществляется путём нажатия на check-box).
     - **Скачать/удалить отчёт**: Здесь осуществсляется поиск отчётов по параметрам их авторов (как правило, это бригадиры), а затем возможно их скачивание или удаление.  

2. **Статистика**:
    - Выберите раздел "Статистика" в левой верхней части экрана
    - На странице со статистикой доступны:
        - **Получение статистики по вызовам**: строится график числа вызовов в заданном временном промежутке
        - **Получение статистики по расходу воды/пены**: строится график расхода воды/пены в заданном временном промежутке
        - **Массовый импорт/экспорт**: доступны с помощью кнопок "Сохранить данные в json формате", "Загрузить данные в json формате"
---

## Тестирование функционала оператора

**Вход в приложение:**  
Логин: `operator_dmitriy`  

1. **Создание новой формы**:
   - Нажмите раздел «Новая форма» в правом верхнем углу
   - При заполнении формы необходимо обызательно ввести адрес в формате "город, улица, номер_дома" или "город улица номер_дома" (например: Москва Ленина 14), затем обязательно нажать Enter.
   - Теперь возможен выбор сразу нескольких бригад. В случае выбора нескольких бригад форма будет видна у каждой, а отчёт будет доступен всем до тех пор, пока первый бриагадир его не заполинт (у остальных он исчезнет при обновлении страницы). Таким образом имеем один отчёт на один вызов. 
   - При нажатии "Отправить бригадам" будет создана форма вызова, которая отобразится на вкладке "Текущие вызовы" у оператора и на вкладке "Вызовы" у соответсвующих бригад. Если не нажать эту кнопку и выйти, то форма не будет сохранена.
   - Убрана кнопка "Сохранить форму", так как теперь есть возможность отслеживать вызов: при нажатии "Отправить бригадам" необходимо перейти в "Текущие вызовы", где появится созданная форма с возможностью отмечать временные точки для вызова: выезд, на месте, вызов завершён. Пока не нажата кнопка "Вызов завершён" имеется возможность обновлять информацию о вызове: для этого нажмите на соответсующую форму (вне области чекбоксов) и вы перейдёте в редактор формы, где после нажания "Отправить бригадам" изменения сохранятся. Отображение изменений может занять несколько секунд. После нажатия "Вызов завершён" в течении нескольких секунд форма исчезнет у оператора и у соотвесвтующих вызову бригад, после нажатия этой кнопки вызов нельзя будет редактировать. 
---

## Тестирование функционала бригадира
*(Функционал пожарных аналогичен, но без возможности редактировать отчёты бригады)*

**Вход в приложение:**  
Логины:
- Бригада 1: `brigadier_igor`
- Бригада 2: `brigadier_oleg`  
После входа происходит перемещение на личную страницу.

**Доступные действия на личной странице:**

3. **Просмотр и редактирование отчётов** (только для бригадира):
   - Раздел "Отчеты"
   - Добавлена возможность сохранить черновик отчёта: необходимо нажать "+" и выбрать новый отчёт, заполнить его и нажать "Сохранить черновик", после этого на странице с отчётами при нажании на карандаш появится ваш черновик, по нажатии на который будет доступно редактирование отчёта. После нажатия "Отправить отчёт" редактирование больше не будет доступно. 
